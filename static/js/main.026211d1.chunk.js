(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(6),o=n(9),s=n(10),r=n(13),l=n(12),c=n(0),i=n.n(c),u=n(19),m=n.n(u);n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(11),h=n(5),b="https://vps.scratchyone.com/todo";function p(e,t,n){var a=e+"="+encodeURIComponent(t);document.cookie=a}function g(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var a=t[n].split("=");if(e===a[0].trim())return decodeURIComponent(a[1])}return null}"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||(b="http://localhost:99");var v=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"bg-gray-400 rounded-b-lg w-full"},i.a.createElement("span",{className:"text-3xl pl-4 pt-2"},i.a.createElement(d.b,{to:"/"},"To-Do Admin Page")),i.a.createElement("button",{onClick:function(){p("token",null)},className:"text-1xl pl-4 pt-2"},"Logout")),i.a.createElement(h.c,null,i.a.createElement(h.a,{exact:!0,path:"/"},i.a.createElement(k,null)),i.a.createElement(h.a,{path:"/user/:username",component:f})))}}]),n}(i.a.Component),k=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).passChange=s.passChange.bind(Object(a.a)(s)),s.login=s.login.bind(Object(a.a)(s)),s.messageChange=s.messageChange.bind(Object(a.a)(s)),s.blockChange=s.blockChange.bind(Object(a.a)(s)),s.addMessage=s.addMessage.bind(Object(a.a)(s)),s.state={users:[],token:g("token"),valid:null,value:"",message:"",block:!1},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.token?fetch(b+"/admin/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:this.state.token})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.setState({valid:!1}):e.setState({users:t.users,valid:!0})})):this.setState({valid:!1})}},{key:"passChange",value:function(e){this.setState({value:e.target.value})}},{key:"messageChange",value:function(e){this.setState({message:e.target.value})}},{key:"blockChange",value:function(e){this.setState({block:e.target.checked})}},{key:"addMessage",value:function(){fetch(b+"/message/add_message",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:this.state.token,message:this.state.message,block:this.state.block})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}},{key:"login",value:function(){var e=this;fetch(b+"/todo/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:"admin",password:this.state.value})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error||(e.setState({token:t.response.token,valid:!0}),p("token",t.response.token),e.componentDidMount())}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:!0===this.state.valid?"":"invisible"},i.a.createElement("input",{type:"text",value:this.state.message,onChange:this.messageChange,className:"m-2 border rounded-sm border-black border-5"}),i.a.createElement("input",{type:"checkbox",onChange:this.blockChange}),i.a.createElement("button",{onClick:this.addMessage,className:"m-2 border rounded-sm border-black border-5 bg-gray-100"},"Send"),i.a.createElement("br",null),i.a.createElement("span",{className:"ml-2 mt-4 text-3xl"},"Users"),i.a.createElement("span",null,this.state.users.map((function(e){return i.a.createElement("div",{className:"ml-2 lext-md"},i.a.createElement(d.b,{to:"user/"+e},e))})))),i.a.createElement("div",{className:!1===this.state.valid?"":"invisible"},"You must be logged in as an admin to view this page",i.a.createElement("br",null),i.a.createElement("input",{type:"password",value:this.state.value,onChange:this.passChange,className:"m-2 border rounded-sm border-black border-5"}),i.a.createElement("button",{onClick:this.login,className:"m-2 border rounded-sm border-black border-5 bg-gray-100"},"Login")))}}]),n}(i.a.Component),f=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={todos:[],token:g("token")},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.token&&fetch(b+"/admin/user",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:this.state.token,username:this.props.match.params.username})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error||e.setState({todos:t.users})}))}},{key:"render",value:function(){var e=this.props.match.params.username;return i.a.createElement("div",null,i.a.createElement("span",{className:"ml-2 mt-4 text-3xl"},e),this.state.todos.map((function(e){return i.a.createElement("div",{className:"ml-2 lext-md "+(e.done?"line-through":"")},e.todo)})))}}]),n}(i.a.Component);v=Object(h.f)(v),m.a.render(i.a.createElement(d.a,{basename:"/todo_admin"},i.a.createElement("div",null,i.a.createElement(v,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.026211d1.chunk.js.map