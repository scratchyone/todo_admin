(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},27:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n(9),s=n(10),r=n(13),l=n(12),i=n(0),c=n.n(i),u=n(19),m=n.n(u);n(27),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(11),h=n(5),p="https://vps.scratchyone.com/admin",v="https://vps.scratchyone.com/todo";function b(e,t,n){var a=e+"="+encodeURIComponent(t);"number"===typeof n&&(a+="; max-age="+24*n*60*60,document.cookie=a)}function f(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var a=t[n].split("=");if(e===a[0].trim())return decodeURIComponent(a[1])}return null}"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||(p="http://localhost:98"),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||(v="http://localhost:100");var g=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"bg-gray-400 rounded-b-lg w-full"},c.a.createElement("span",{className:"text-3xl pl-4 pt-2"},c.a.createElement(d.b,{to:"/"},"To-Do Admin Page")),c.a.createElement("button",{onClick:function(){b("token",null,10)},className:"text-1xl pl-4 pt-2"},"Logout")),c.a.createElement(h.c,null,c.a.createElement(h.a,{exact:!0,path:"/"},c.a.createElement(k,null)),c.a.createElement(h.a,{path:"/user/:username",component:E})))}}]),n}(c.a.Component),k=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).passChange=s.passChange.bind(Object(a.a)(s)),s.login=s.login.bind(Object(a.a)(s)),s.state={users:[],token:f("token"),valid:null,value:""},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.token?fetch(p+"/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:this.state.token})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?e.setState({valid:!1}):e.setState({users:t.users,valid:!0})})):this.setState({valid:!1})}},{key:"passChange",value:function(e){this.setState({value:e.target.value})}},{key:"login",value:function(){var e=this;fetch(v+"/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:"admin",password:this.state.value})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error||(e.setState({token:t.response.token,valid:!0}),b("token",t.response.token,10),e.componentDidMount())}))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("div",{className:!1!==this.state.valid?"":"invisible"},c.a.createElement("span",{className:"ml-2 mt-4 text-3xl"},"Users"),c.a.createElement("span",null,this.state.users.map((function(e){return c.a.createElement("div",{className:"ml-2 lext-md"},c.a.createElement(d.b,{to:"user/"+e},e))})))),c.a.createElement("div",{className:!1===this.state.valid?"":"invisible"},"You must be logged in as an admin to view this page",c.a.createElement("br",null),c.a.createElement("input",{type:"password",value:this.state.value,onChange:this.passChange,className:"m-2 border rounded-sm border-black border-5"}),c.a.createElement("button",{onClick:this.login,className:"m-2 border rounded-sm border-black border-5 bg-gray-100"},"Login")))}}]),n}(c.a.Component),E=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={todos:[],token:f("token")},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.token&&fetch(p+"/user",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({token:this.state.token,username:this.props.match.params.username})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error||e.setState({todos:t.users})}))}},{key:"render",value:function(){var e=this.props.match.params.username;return c.a.createElement("div",null,c.a.createElement("span",{className:"ml-2 mt-4 text-3xl"},e),this.state.todos.map((function(e){return c.a.createElement("div",{className:"ml-2 lext-md "+(e.done?"line-through":"")},e.todo)})))}}]),n}(c.a.Component);g=Object(h.f)(g),m.a.render(c.a.createElement(d.a,{basename:"/todo_admin"},c.a.createElement("div",null,c.a.createElement(g,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.7e7c72a8.chunk.js.map